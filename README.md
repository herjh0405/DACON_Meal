# 🔥 [구내식당 식수 인원 예측 AI 경진대회](https://dacon.io/competitions/official/235743/overview/description)

2021.06.03 ~ 2021.07.23 / 참여 인원 : 허정훈, 장준보, 류현주, 우일

구내식당의 요일별 점심, 저녁식사를 먹는 인원을 예측 → 점심, 저녁 다른 모델을 사용할 것

train : 2016-02-01 ~ 2021-01-26 / test : 2021-01-27 ~ 2021-04-19 경상남도 진주시

## 💻Data Info

* 일자, 요일, 본사정원수, 본사휴가자수, 본사출장자수, 본사시간외근무명령서승인건수, 현본사소속재택근무자수, 조식메뉴, 중식메뉴, 석식메뉴, 중식계, 석식계로 이루어져 있음.
  * 일자, 요일, 정원, 휴가자, 출장자, 야근자, 재택근무자, 조식, 중식, 석식, 중식계, 석식계로
  * **메뉴를 제외한 변수**부터 작업해볼 예정

## 🌏 외부 데이터

### 🧐 활용 계획

* 코로나 데이터 → 고민

* 날씨 데이터 → 강수량을 명목변수로 사용, 기온-습도 → 불쾌지수 명목변수

* 미세먼지 데이터 → 명목변수

* 공휴일 데이터 → 공휴일 전후 변수 추가

  * 5월 1일 노동자의 날, 10월 1일 창립일에 휴무

  ![image-20210624140546843](https://raw.githubusercontent.com/herjh0405/Img/master/img/image-20210624140546843.png)

###  😇 데이터 출처

* 코로나 발생현황 데이터 [link](https://www.data.go.kr/tcs/dss/selectApiDataDetailView.do?publicDataPk=15043378) (국내, 경남, 진주시)

  * 일일확진자, 누적확진자, 일일검사자 데이터

* 날씨 데이터 [link](https://www.data.go.kr/tcs/dss/selectApiDataDetailView.do?publicDataPk=15057682) (진주시 충무공동 데이터)

  * 강수량, 강수형태, 기온, 습도, 불쾌지수 데이터 → 점심-저녁 분류

    * 강수형태 : 없음(0), 비(1), 비/눈(2), 눈(3), 소나기(4), 빗방울(5), 빗방울/눈날림(6), 눈날림(7) → 비/눈은 비와 눈이 섞여 오는 것을 의미 (진눈개비) [repo](http://www.riss.kr/search/detail/DetailView.do?p_mat_type=be54d9b8bc7cdb09&control_no=b50f3c1b6f3af86cffe0bdc3ef48d419)

      ![image](https://user-images.githubusercontent.com/54921730/122006828-4480bf00-cdf2-11eb-8810-72a9b1e42a1e.png)

    * 불쾌지수 = 1.8x기온 - 0.55x(1-습도)x(1.8x기온-26)+32 [ref](https://www.kma.go.kr/HELP/basic/help_01_05.jsp)

      ![image](https://user-images.githubusercontent.com/54921730/122006864-506c8100-cdf2-11eb-9da5-3c4d88b10df3.png)

* 미세먼지 데이터 [2016-2020](http://www.airkorea.or.kr/web/pastSearch?pMENU_NO=123) [2021](http://www.airkorea.or.kr/web/realSearch?pMENU_NO=97) (경남 진주시 동진로 279 (한국전력공사 진주지점))

  * PM10 : 미세먼지, PM2.5 : 초미세먼지
  * 결측치는 가장 가까운 다른 지점 관측치로 대체
  * 아래의 기준에 따라 명목변수로 분류

  ![image](https://user-images.githubusercontent.com/54921730/122006917-5eba9d00-cdf2-11eb-983d-9dec5bd6a4de.png)

* 휴일(공휴일/대체공휴일) 데이터 [link](https://www.data.go.kr/data/15012690/openapi.do)

## 🤔 고민점

* 복날 데이터를 넣을까? 너무 전체 데이터에 비해 적다. → 메뉴로 대체할 수 있지 않을까?
  * '2017-07-12', '2018-07-17', '2019-07-12', '2020-07-16'
* 연말 데이터는 또 어떤가? 너무 Sparse 할까봐 고민
* 과연 정원의 변화가 생길 때는 어떨까?
* 3월달에는 시위가 많았다. 이럴 때는 또 어떨까
* 주 52시간제 2018-07-01 참고

## 📑참고 논문

[머신러닝을 이용한 단체급식 다중코너 식수 예측 모델 연구(2021)](http://www.riss.kr/search/detail/DetailView.do?p_mat_type=be54d9b8bc7cdb09&control_no=b50f3c1b6f3af86cffe0bdc3ef48d419)

[기계학습방법을 활용한 대형 집단급식소의 식수 예측(2019)](http://koreascience.or.kr/article/JAKO201912261946958.pdf)

[한식 분야의 듀이십진분류법 수정 전개 방안에 관한 연구(2009)](https://www.koreascience.or.kr/article/JAKO201117463456708.pdf)

# 👀 EDA

## 🎊 파생변수

### 재택근무자

재택근무자가 처음 발생한 2020-01-06 이전과 이후의 변수들의 상관관계가 크게 달라짐 

→ is_corona 컬럼 추가

![image](https://user-images.githubusercontent.com/54921730/122203721-4a050480-ced9-11eb-8204-256b699d1390.png)

* 현재도 코로나이기에, 코로나 이후를 살펴보자

  * 출장자, 야근자와 중식계의 상관관계는 상당히 높음.
  * 석식계는 야근자의 영향이 절대적
  * 정원은 제거하고 출근 인원을 학습시키는 게 효율적
    * 재택근무자와 휴가자 컬럼을 어떻게 활용할까?

  ![image](https://user-images.githubusercontent.com/54921730/122213235-b5ec6a80-cee3-11eb-9eed-96b29fce0235.png)

### 년, 월, 일, 주차 컬럼

각 컬럼별로 유의미한 차이가 있는 것으로 식별되고, 거기에 월말이라는 변수는 추가할만하다.

* 계절성 요인을 월별로 표현할 수 있을 듯 하다.
* 연_주차 컬럼은 월과 주차로 표현되지 않을까? 나중에 다시 한번 점검해보자

![image](https://user-images.githubusercontent.com/54921730/122222758-85113300-ceed-11eb-8d34-b9443e727ead.png)

![image](https://user-images.githubusercontent.com/54921730/122225966-7c6e2c00-cef0-11eb-8a7a-fc7593b6f113.png)

### 요일

요일별로 큰 차이를 보인다.

* 월, 금의 경우 휴가자가 많음
* 수, 금의 경우 야근자가 적음
* 월요일의 경우 중식을 상당히 많이 먹는다. → 3가지 모두 추가 컬럼으로 사용할 수 있을 것

![image](https://user-images.githubusercontent.com/54921730/122228864-3bc3e200-cef3-11eb-9af9-08398b8a9867.png)

## 👻 아웃라이어

### 요일

* 금요일의 경우 2019년 1월 4일을 기점으로 야근자의 수가 확 줄어든다. 
  * 내부 정책의 변화로 추측
  * 이것도 하나의 컬럼으로 추가할 수 있을 듯
  * 그러다 2019년 10월 4일 LH 국정감사로 인해 야근자가 폭증 → **이상치로 처리, 제거**
* 수요일의 경우 초반 4번의 경우만 야근자가 존재하고 그 후로는 거의 0에 수렴
  * 초반 4번은 어떻게 처리할까?
  * 마찬가지로 2019년 10월 2일, 2018년 10월 10일 야근자 폭증 →  **이상치로 처리, 제거**

![image](https://user-images.githubusercontent.com/54921730/122231510-73cc2480-cef5-11eb-9725-07f16ed0fdbe.png)

### 석식계

* 석식계가 0인 컬럼들이 있음 → 이 친구들 어떻게 할건가?

  * 그냥 다 날리기엔 너무 많은 데이터 / 과연 석식계가 0인 날에는 중식계에 영향을 안끼치는가?

* 2016년 11월부터 마지막 주 수요일에는 가정의 날 / 자기계발의 날이라며 저녁을 안줌

  * 오류 데이터 중에서도 오류 데이터가 있음 

    *  2017년 8월의 마지막 주 수요일에 무슨 이유에서인지 배식을 하였고 금요일로 대체

    * 그러고 9월의 마지막 주 수요일은 쉬었으나 석식에 메뉴가 표시 됨 
      * 아마 이 데이터는 *로 바꿔주는 게 맞아보임
    * 벗, 그 2일 뒤 금요일도 석식계가 0임 / 둘 중 하나는 문제가 있는 것으로 판단
      * 이라고 생각했으나 그 다음 휴일이 5일짜리가 넘음, 그래서 올바른 데이터인 듯
      * 주말 포함 휴일이 3일 이상 되는 컬럼을 추가하는 것도 괜찮을 듯
      * 이 달의 첫 주, 마지막 주 표시하는 것도 나쁘지 않을 듯 (달의 주차 대신)

    ![image-20210617000652399](img/image-20210617000652399.png)

  * 그러던 와중 2018년 2월 14일 수요일 (마지막 주 수요일이 아님)도 메뉴는 적혀있으나 석식계가 0

    * 알고보니 다음날이 설날이어서 석식 배식을 안한 것으로 판단 / 메뉴를 지워주는게 좋아보임

  * 또 잘 나가다가 2019년 12월 31일 화요일에 석식계가 0임

    * 다음날이 긴 연휴면 가끔 석식을 안주는 듯 / 양아치냐?

  * 그러고 2020년 3월부터 중단 됐다가 11월 25일 기분 좋아서 자기계발의 날함

* 이 친구들을 어떻게 처리하냐가 꽤 큰 관점일 듯

![image](https://user-images.githubusercontent.com/54921730/122243552-2ce32c80-ceff-11eb-9ac5-dc1802892f2d.png)

### 식사가능 인원

* 정원-(휴가자+출장자)+야근자가 가장 연관성이 높음

![image](https://user-images.githubusercontent.com/54921730/122630807-a5b1d680-d101-11eb-9f11-ff2690e2476f.png)



## To-Do

1. 메뉴 비교
2. 









